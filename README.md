> 我不会写开发日志啊啊啊

# 药剂工艺 开发日志
## 00 简介
药剂工艺这个游戏我很早就听说,我看到它在实习的题目中想都没想就选的这个
这款游戏以其独特的画风和玩法设计吸引到我,它将制作药剂的过程转化为在地图上行进,这样的创新正是我对游戏开发这个行业最美好的期待
在制作过程中我也意识到游戏开发并非易事,了解到从点子到成果的每一步都无比的艰难,这也更引起我对游戏开发的兴趣,期待用码力将一个个新奇的创意化作实实在在的成果
## 01 完成度
### 核心玩法:
- 三种原材料
 - 每种有自己的路线(目前是不同方向的直线)
 - 材料有物理效果,可以在主界面丢来丢去(?
 - 材料可以从面板拖出,放入锅和钵以及从钵放入锅
- 研磨
 - 材料放入钵中后右键钵进行研磨
 - 研磨将材料的效果提升至至多两倍
- 信息显示
 - 鼠标悬停在材料上时在地图可以预览将生成的路线
 - 悬停于材料面板上会显示路线和材料介绍
 - 研磨时可以实时显示材料路线长度变化
 - 剩余水量以视觉效果实现(数字型的指示我也没删)
 - 鼠标悬停在材料上时显示研磨度 
- 移动
 - 长按锅搅拌,药水会按预计的路线行进
 - 加水时药剂向原点移动
 - 药水在骨区逐渐减少水量,水量为零炼药失败
 - 旋涡:药水触碰旋涡时鼓风,会旋转吸入,然后传送
 - 可以加入多个不同材料,药水会按顺序行走
- UI相关
 - 背包:材料从中拖出来,把材料向右侧扔出屏幕=放回背包
 - 工作区:锅,鼓风机,水,钵,都可以点,用来制作药水
 - 信息区:显示当前药水状态/名字

### 扩展玩法:
- 花园:每天会刷新药材,点击采摘获取5个相应药材
- 顾客:每天有3个顾客来购买药,价格随机浮动,制作相应效果的药水可以卖出,等级越高买的越贵
- 商人:每天1个商人,在顾客队列的随机位置,售卖随机3组药材,每组5个
- 顾客队列清空可以进入下一日,花园状态会刷新
- 存档:左上角有个小按钮,点击存档,会保存金币和药材数量,当日顾客数据不会保存.游戏启动时自动读取存档

### 优化:
- 视觉优化
 - 研磨,加水,搅拌,加入药材,鼓风,新增药水效果都添加了粒子效果
- 体验优化
 - 地图可以鼠标拖动,滚轮缩放

## 02 开发历程
- 9.30晚上开题
 - 熟悉Godot引擎,看相应教程
 - 找了一个画图网站开始画素材
 - 制作背包,可以把药材从中拖出
 - 添加药材的物理系统
 - 添加锅的碰撞体积
- 10.1
 - 装git工具(sourcetree)
 - 手写队列数据结构,用于存储添加进锅的药材序列
 - 让药水可以按照药材序列行进
 - 添加辅助线(这块真的难)
 - 使用子视图实现视角跟随药水而外部界面不受影响
 - 增加加水功能,显示指向原点的箭头
 - 增加研钵,右键研磨药材
 - 加入骨区和剩余水量系统
- 10.2
 - 药水在指定位置鼓风可以获取药水效果
 - 位置越精确药水越强
 - 加入信息面板显示当前药水状态
 - 剩余水量的可视化显示
 - 加入旋涡
 - 药材不再是无限的,可以从背包取出和放回
 - 增加花园,可以采摘药材
 - 开始维护场景切换逻辑
 - 增加出售界面
 - 药水地图可以拖动和缩放
- 10.3
 - 完善出售界面
 - 增加GlobalSellManager
 - 咕咕咕
- 10.4
 - 增加粒子效果
 - 重构花园
 - 实现数据持久化(存档系统)
 - 信息面板中显示药材的名字和介绍
- 10.5
 - 增加商人
 - 完善"一日流程"相关机制
 - 写readme
- 10.6
 - 神秘bug,跟闹鬼了一样,不敢改了
 - 导出exe文件

## 03 难题
- 首先是Godot编辑器不熟
 - 信号怎么跨树传播?
 - 环境变量里的脚本怎么使用其它节点的方法?
 - 怎么让非根节点的参数开放在实例化场景的检查器中?
 - 场景切换时怎么传递信息?
- 因为编辑器不熟就只能用些旁门左道然后耦合爆炸
 - 自定义数据结构不好做
 - 数据类型不太熟
 - 话说setter和getter的模式只有java在用吗?
- 有些部分确实不好设计
 - 不会做可以滚动的背包,所以只塞得下3种药材
 - 让药材路径形成(奇怪的)曲线,不会构造函数,写死成点列又工作量爆炸,遂放弃
- 神秘问题
 - 不好描述,线下说

## 03 成就
- 这个~~半成品~~游戏
 - ~~废话~~
- Godot基本用法